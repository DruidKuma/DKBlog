<div class="content">
    <div class="container">
        <div class="col-lg-12">
            <div class="card-box">

                <div class="header-title prop-title m-t-0 m-b-15">
                        <span class="prop-title-text">
                            Blog Comments
                        </span>

                    <!--<ul class="nav navbar-nav dk-search-form">-->
                        <!--<li class="hidden-xs">-->
                            <!--<form role="search" class="app-search ng-pristine ng-valid">-->
                                <!--<input type="text" placeholder="Search..." class="form-control m-t-0 m-r-10" ng-model="commentFilter.search" ng-model-options="{ debounce: { 'default': 500, 'blur': 0 } }" ng-change="resetPaginationAndReload()">-->
                                <!--<a href=""><i class="fa fa-search"></i></a>-->
                            <!--</form>-->
                        <!--</li>-->
                    <!--</ul>-->

                    <ul class="nav navbar-nav navbar-right">
                        <li class="m-r-10">
                            <uib-pagination
                                    total-items="commentFilter.totalItems"
                                    items-per-page="commentFilter.entriesOnPage"
                                    ng-model="commentFilter.currentPage"
                                    max-size="5"
                                    class="pagination-sm pull-right m-t-0 m-b-0 m-r-10"
                                    boundary-link-numbers="true"
                                    rotate="false"
                                    ng-click="loadComments()">
                            </uib-pagination>
                        </li>
                    </ul>

                    <ul class="nav navbar-nav dk-search-form comment-filter-list">
                        <li class="comment-filter-item"
                            ng-class="{'active' : !commentFilter.typeFilter}"
                            ng-click="changeTypeFilter('')">All</li>
                        <li>|</li>
                        <li class="comment-filter-item"
                            ng-class="{'active' : commentFilter.typeFilter == 'APPROVED'}"
                            ng-click="changeTypeFilter('APPROVED')">Approved</li>
                        <li>|</li>
                        <li class="comment-filter-item"
                            ng-class="{'active' : commentFilter.typeFilter == 'PENDING'}"
                            ng-click="changeTypeFilter('PENDING')">Pending</li>
                        <li>|</li>
                        <li class="comment-filter-item"
                            ng-class="{'active' : commentFilter.typeFilter == 'SPAM'}"
                            ng-click="changeTypeFilter('SPAM')">Spam</li>
                        <li>|</li>
                        <li class="comment-filter-item"
                            ng-class="{'active' : commentFilter.typeFilter == 'TRASH'}"
                            ng-click="changeTypeFilter('TRASH')">Trash</li>
                    </ul>
                </div>

                <div style="position: relative;">
                    <div class="dk-loading" ng-show="loadingProcess">
                        <div class="dk-loading-animation"></div>
                    </div>

                    <ul class="nav navbar-nav dk-search-form comment-action-list" ng-show="actionCommentIds.length">
                        <li class="text-success comment-action-item"><i class="fa fa-arrow-right"></i></li>
                        <li class="comment-action-item" ng-click="changeCommentStatus('APPROVED')">Approve</li>
                        <li>|</li>
                        <li class="comment-action-item" ng-click="changeCommentStatus('PENDING')">Unapprove</li>
                        <li>|</li>
                        <li class="comment-action-item" ng-click="changeCommentStatus('SPAM')">Mark as Spam</li>
                        <li>|</li>
                        <li class="comment-action-item" ng-click="changeCommentStatus('TRASH')">Move to Trash</li>
                    </ul>

                    <ul class="nav navbar-nav dk-search-form comment-active-filters m-l-15" ng-show="commentFilter.ipFilter || commentFilter.postFilter">
                        <li class="m-r-5" ng-show="commentFilter.ipFilter">{{commentFilter.ipFilter}} <i class="fa fa-times" ng-click="removeIpFilter()"></i></li>
                        <li ng-show="commentFilter.postFilter">Post ID: {{commentFilter.postFilter}} <i class="fa fa-times" ng-click="removePostFilter()"></i></li>
                    </ul>

                    <table class="table m-b-15" id="commentsTable">
                        <thead>
                        <tr>
                            <th width="5%"><input type="checkbox" ng-checked="checkIfAllChecked()" ng-click="toggleAllCheck($event)"/></th>
                            <th width="20%">Author</th>
                            <th width="45%">Comment</th>
                            <th width="15%">Rating</th>
                            <th width="15%">In Response To</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="comment-row" ng-repeat="comment in comments">
                            <td><input type="checkbox" ng-checked="checkIfInActionList(comment.id)" ng-click="toggleActionCommentId(comment.id, $event)"/></td>
                            <td class="author column-author">

                                <div class="comment-user-name m-b-10">
                                    <img src="dist/images/user-comment.png" height="32" width="32">
                                    <strong>{{comment.author}}</strong>
                                </div>
                                <a href="mailto:{{comment.email}}" class="comment-user-mail">{{comment.email}}</a>
                                <br>
                                <span class="comment-user-ip" ng-click="filterByIpAddres(comment.ipAddress)">{{comment.ipAddress}}</span>
                            </td>
                            <td class="comment-content-wrapper">
                                <div class="comment-date">
                                    Submitted on <span class="comment-date">{{comment.date | date:'dd/MM/yyyy HH:mm'}}</span>
                                </div>
                                <div class="comment-content">
                                    {{comment.text}}
                                </div>
                                <div class="comment-action-block">
                                    <ul class="comment-action-list">
                                        <li class="comment-approve comment-action"
                                            ng-show="comment.type!='APPROVED'"
                                            ng-click="changeCommentStatus('APPROVED', comment.id)">Approve</li>
                                        <li class="comment-approve comment-action"
                                            ng-show="comment.type=='APPROVED'"
                                            ng-click="changeCommentStatus('PENDING', comment.id)">Unapprove</li>
                                        <li>|</li>
                                        <li class="comment-action">Reply</li>
                                        <li>|</li>
                                        <li class="comment-action" ng-click="openCommentEditModal(comment)">Edit</li>
                                        <li ng-show="comment.type!='SPAM'">|</li>
                                        <li class="comment-action comment-danger"
                                            ng-show="comment.type!='SPAM'"
                                            ng-click="changeCommentStatus('SPAM', comment.id)">Spam</li>
                                        <li ng-show="comment.type!='TRASH'">|</li>
                                        <li class="comment-action comment-danger" ng-show="comment.type!='TRASH'"
                                            ng-click="changeCommentStatus('TRASH', comment.id)">Trash</li>
                                    </ul>
                                </div>
                            </td>
                            <td class="comment-rating">
                                <uib-rating ng-model="rate" read-only="true"></uib-rating>
                            </td>
                            <td>
                                <a href="/entry/{{comment.postId}}">View Post</a>
                                <i class="fa fa-hashtag post-sort-btn"
                                   ng-show="!commentFilter.postFilter"
                                   ng-click="applyPostFilter(comment.postId)"></i>
                                <span ng-show="!commentFilter.typeFilter" class="text-{{comment.type}} center-block">{{comment.type}}</span>
                            </td>
                        </tr>

                        </tbody>
                    </table>
                </div>

            </div>
        </div><!-- end col -->
    </div>
</div>


<script type="text/ng-template" id="editCommentModal.html">
    <div class="modal-header">
        <h3 class="modal-title">Edit Comment (submitted on <span class="comment-date">{{comment.date | date:'dd/MM/yyyy HH:mm'}}</span>)</h3>
    </div>
    <div class="modal-body">
        <div class="container">
            <div class="col-lg-12">
                <form class="form-horizontal" novalidate name="commentForm">

                    <div class="form-group">
                        <label class="col-md-2">
                            Author Name
                        </label>
                        <div class="col-md-10">
                            <input name="name" class="form-control" type="text" ng-model="comment.author" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-2">
                            Author Email
                        </label>
                        <div class="col-md-10">
                            <input name="email" class="form-control" type="text" ng-model="comment.email" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-2">
                            Comment Text
                        </label>
                        <div class="col-md-10">
                            <textarea name="text" class="form-control" ng-model="comment.text" required></textarea>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-2">
                            Comment Type
                        </label>
                        <div class="col-md-10">
                            <div class="form-group row">
                                <div class="col-lg-3">
                                    <label class="form-control">
                                        <input type="radio" ng-model="comment.type" value="APPROVED">
                                        <span class="m-l-10 text-success">APPROVED</span>
                                    </label>
                                </div>
                                <div class="col-lg-3">
                                    <label class="form-control">
                                        <input type="radio" ng-model="comment.type" value="PENDING">
                                        <span class="m-l-10 text-info">PENDING</span>
                                    </label>
                                </div>
                                <div class="col-lg-3">
                                    <label class="form-control">
                                        <input type="radio" ng-model="comment.type" value="SPAM">
                                        <span class="m-l-10 text-danger">SPAM</span>
                                    </label>
                                </div>
                                <div class="col-lg-3">
                                    <label class="form-control">
                                        <input type="radio" ng-model="comment.type" value="TRASH">
                                        <span class="m-l-10 text-warning">TRASH</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                </form>
            </div>

        </div>

    </div>
    <div class="modal-footer">
        <div ng-if="commentForm.$invalid">
            <div class="layer"></div>
            <button class="btn btn-primary" type="button" disabled>Save</button>
        </div>

        <button class="btn btn-primary" type="button" ng-click="saveComment()" ng-if="!commentForm.$invalid">Save</button>
        <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
    </div>
</script>